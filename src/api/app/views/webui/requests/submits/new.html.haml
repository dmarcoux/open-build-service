:ruby
  @pagetitle = 'Create submit request'

.row
  .col
    .card
      .card-body
        .col-12.col-md-9.col-xl-8
          %h3= @pagetitle
          %p Do you want to submit #{package_link @package, rev: @revision}?
          %p.font-italic
            You are about to send a request to the owner of the original #{@package ? 'package' : 'project'}.
            Please describe what you have done and why they should apply your changes.
            The owner will be notified with the following details.
        .col-12.col-md-9.col-xl-6
          = form_tag(package_create_submit_request_path(@project, @package), method: 'post') do
            = hidden_field_tag(:project, @project)
            = hidden_field_tag(:package, @package)
            = hidden_field_tag(:rev, @revision)
            .form-group
              = label_tag(:sourceproject, 'From source project:')
              = text_field_tag(:sourceproject, @project.name, disabled: true, class: 'form-control text-truncate')
            .form-group
              = render partial: 'webui/shared/autocomplete', locals: { html_id: 'targetproject', label: 'To target project:',
                                                                        disabled: params[:readonly], value: nil,
                                                                        data: { source: autocomplete_projects_path,
                                                                                requests_url: request_list_small_path,
                                                                                develpackage_url: package_devel_project_path } }
              - if params[:readonly]
                = hidden_field_tag(:targetproject, nil)
            .form-group
              = label_tag(:targetpackage, 'To target package:')
              = text_field_tag(:targetpackage, nil, disabled: params[:readonly], class: 'form-control')
              - if params[:readonly]
                = hidden_field_tag(:targetpackage, nil)
            .form-group
              = label_tag(:description, 'Description:')
              %abbr.text-danger{ title: 'required' } *
              ~ text_area_tag(:description, nil, size: '40x3', class: 'form-control', required: true)
            .form-group.d-none#supersede-display
              = label_tag(:supersede_requests, 'Supersede requests:')
              #supersede-requests
            .custom-control.custom-checkbox#sourceupdate-display
              = check_box_tag(:sourceupdate, 'cleanup', nil, class: 'custom-control-input')
              = label_tag(:sourceupdate, 'Remove local package if request is accepted', class: 'custom-control-label')
            %p.d-none#devel-project-warning
              You are about to bypass the devel project, please submit to
              %b#devel-project-name
              instead.
            .pt-4
              = submit_tag('Create', class: 'btn btn-primary px-4')

- content_for :ready_function do
  setupRequestDialog('#{package_branch_diff_info_path(@project.name, @package.name)}');
